0 ' bitdump.bas
1 POKE 65495,0
5 INPUT "X,Y,W,H";X,Y,W,H
10 ' DRAW BOX
20 PMODE 4,1:PCLS:SCREEN 1,1
30 LINE(X,Y)-(X+W-1,Y+H-1),PSET,B
40 GOSUB 2000

100 ' DUMP SQUARE DATA
110 GOSUB 1500
120 FOR R=0 TO H-1
130 L=3584+R*32:GOSUB 1000
140 NEXT
150 GOSUB 2000:PRINT

200 ' VARPTR
210 DIM BX(6)
250 GET(X,Y)-(X+W-1,Y+H-1),BX
260 L=VARPTR(BX(0))
270 PRINT "VARPTR(BX(0)) =";L
280 GOSUB 2000
290 FOR I=L TO L+H*2-1 STEP 2
300 PRINT:PRINT I,PEEK(I);PEEK(I+1);
310 NEXT
315 GOSUB 2000:SCREEN 1,1
320 PUT(32,32)-(32+W-1,32+H-1),BX

999 GOTO 999

1000 ' BIT DUMP
1005 PRINT
1010 FOR I=0 TO 1:V=PEEK(L+I)
1020 FOR J=7 TO 0 STEP-1:IF V AND BT(J) THEN PRINT "1"; ELSE PRINT "0";
1030 NEXT:PRINT" ";:NEXT
1040 PRINT USING"= ### ###";PEEK(L);PEEK(L+1);
1050 RETURN

1500 ' BIT INIT
1510 DIM BT(7):BT=1
1520 FOR Z=0 TO 7:BT(Z)=BT:BT=BT*2:NEXT
1530 RETURN

2000 ' INKEY$
2010 IF INKEY$="" THEN 2000
2020 RETURN
