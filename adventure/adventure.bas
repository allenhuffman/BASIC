0 POKE 65495,0
10 DIM RG(22,20)'23 screens, 21 bytes each
20 DIM RM(29,6) '30 rooms, 7 bytes each
30 DIM BT(7):FOR A=0 TO 7:BT(A)=INT(2^A):NEXT
40 PRINT"LOADING ROOM GRAPHICS."
50 FOR A=0 TO 22:FOR B=0 TO 20:READ RG(A,B):NEXT:NEXT
60 PRINT"LOADING ROOM LAYOUT."
70 FOR A=0 TO 29:FOR B=0 TO 6:READ RM(A,B):NEXT:NEXT
80 CLS:RM=0
90 INPUT "ROOM";RM:GOSUB 130:GOTO 90
100 END
110 ' DRAW ROOM
120 
130 CLS:RG=RM(RM,0)
140 FOR Z1=0 TO 20 STEP 3:FOR Z2=1 TO 2
150 Z=RG(RG,Z1):GOSUB210
160 Z=RG(RG,Z1+1):GOSUB250
170 Z=RG(RG,Z1+2):GOSUB210
180 PRINT:NEXT:NEXT
190 RETURN
200 
210 REM Show bits forward
220 FOR BT=0 TO 7:IF Z AND BT(BT) THEN PRINT"X"; ELSE PRINT " ";
230 NEXT:RETURN
240 
250 REM Show bits reversed
260 FOR BT=7 TO 0 STEP -1:IF Z AND BT(BT) THEN PRINT"X"; ELSE PRINT " ";
270 NEXT:RETURN
280 
290 
300 ' Color lookup table
310 'zCOLOR_BLACK=0
320 'zCOLOR_LTGRAY=1
330 'zCOLOR_WHITE=2
340 'zCOLOR_YELLOW=3
350 'zCOLOR_ORANGE=4
360 'zCOLOR_RED=5
370 'zCOLOR_PURPLE=6
380 'zCOLOR_BLUE=7
390 'zCOLOR_LTCYAN=8
400 'zCOLOR_CYAN=9
410 'zCOLOR_DKGREEN=10
420 'zCOLOR_LIMEGREEN=11
430 'zCOLOR_OLIVEGREEN=12
440 'zCOLOR_TAN=13
450 'zCOLOR_FLASH=14
460 ' 
470 ' Room graphics
480 '
490 ' 23 room designs used to make up 30 game rooms.
500 '
510 ' Left of Name Room
520 ' 0-roomGfxLeftOfName
530 DATA &H00,&HFF,&HFF
540 DATA &H00,&H00,&H00
550 DATA &H00,&H00,&H00
560 DATA &H00,&H00,&H00
570 DATA &H00,&H00,&H00
580 DATA &H00,&H00,&H00
590 DATA &H00,&HFF,&H0F
600 
610 ' Below Yellow Castle
620 ' 1-roomGfxBelowYellowCastle
630 DATA &H00,&HFF,&H0F
640 DATA &H00,&H00,&H00
650 DATA &H00,&H00,&H00
660 DATA &H00,&H00,&H00
670 DATA &H00,&H00,&H00
680 DATA &H00,&H00,&H00
690 DATA &H00,&HFF,&HFF
700 '
710 ' Side Corridor 
720 ' 2-roomGfxSideCorridor
730 DATA &H00,&HFF,&H0F
740 DATA &H00,&H00,&H00
750 DATA &H00,&H00,&H00
760 DATA &H00,&H00,&H00
770 DATA &H00,&H00,&H00
780 DATA &H00,&H00,&H00
790 DATA &H00,&HFF,&H0F
800 '
810 ' Number Room Definition
820 ' 3-roomGfxNumberRoom
830 DATA &H00,&HFF,&HFF
840 DATA &H30,&H00,&H00
850 DATA &H30,&H00,&H00
860 DATA &H30,&H00,&H00
870 DATA &H30,&H00,&H00
880 DATA &H30,&H00,&H00
890 DATA &H00,&HFF,&H0F
900 '
910 ' ??
920 ' 4-roomGfxTwoExitRoom
930 DATA &H00,&HFF,&H0F
940 DATA &H30,&H00,&H00
950 DATA &H30,&H00,&H00
960 DATA &H30,&H00,&H00
970 DATA &H30,&H00,&H00
980 DATA &H30,&H00,&H00
990 DATA &H00,&HFF,&H0F
1000 '
1010 ' Top of Blue Maze 
1020 ' 5-roomGfxBlueMazeTop
1030 DATA &H00,&HFF,&H0F
1040 DATA &H00,&H0C,&H0C
1050 DATA &H00,&H0C,&H3C
1060 DATA &H00,&H0C,&H00
1070 DATA &H00,&HFF,&H3F
1080 DATA &H00,&H30,&H30
1090 DATA &H00,&H33,&H3F
1100 '
1110 ' Blue Maze #1
1120 ' 6-roomGfxBlueMaze1
1130 DATA &H00,&HFF,&HFF
1140 DATA &H00,&H00,&H00
1150 DATA &H00,&HFC,&HFF
1160 DATA &H00,&H00,&HC0
1170 DATA &H00,&H3F,&HCF
1180 DATA &H00,&H30,&HCC
1190 DATA &H00,&HF3,&HCC
1200 ' 
1210 ' Bottom of Blue Maze
1220 ' 7-roomGfxBlueMazeBottom
1230 DATA &H00,&HF3,&H0C
1240 DATA &H00,&H30,&H0C
1250 DATA &H00,&H3F,&H0F
1260 DATA &H00,&H00,&H00
1270 DATA &H00,&HF0,&H00
1280 DATA &H00,&H30,&H00
1290 DATA &H00,&HFF,&HFF
1300 '
1310 ' Center of Blue Maze
1320 ' 8-roomGfxBlueMazeCenter
1330 DATA &H00,&H33,&H3F
1340 DATA &H00,&H30,&H3C
1350 DATA &H00,&HFF,&H3C
1360 DATA &H00,&H03,&H3C
1370 DATA &H00,&H33,&H3C
1380 DATA &H00,&H33,&H0C
1390 DATA &H00,&HF3,&H0C
1400 '
1410 ' Blue Maze Entry
1420 ' 9-roomGfxBlueMazeEntry
1430 DATA &H00,&HF3,&HCC
1440 DATA &H00,&H33,&H0C
1450 DATA &H00,&H33,&HFC
1460 DATA &H00,&H33,&H00
1470 DATA &H00,&HF3,&HFF
1480 DATA &H00,&H00,&H00
1490 DATA &H00,&HFF,&H0F
1500 '
1510 ' Maze Middle 
1520 ' 10-roomGfxMazeMiddle
1530 DATA &H00,&HFF,&HCC
1540 DATA &H00,&H00,&HCC
1550 DATA &H00,&H03,&HCF
1560 DATA &H00,&H03,&H00
1570 DATA &H00,&HF3,&HFC
1580 DATA &H00,&H33,&H0C
1590 DATA &H00,&H33,&HCC
1600 '
1610 ' Maze Side 
1620 ' 11-roomGfxMazeSide
1630 DATA &H00,&H33,&HCC
1640 DATA &H00,&H30,&HCC
1650 DATA &H00,&H3F,&HCF
1660 DATA &H00,&H00,&HC0
1670 DATA &H00,&H3F,&HC3
1680 DATA &H00,&H30,&HC0
1690 DATA &H00,&HFF,&HFF
1700 '
1710 ' Maze Entry
1720 ' 12-roomGfxMazeEntry
1730 DATA &H00,&HFF,&H0F
1740 DATA &H00,&H30,&H00
1750 DATA &H00,&H30,&HFF
1760 DATA &H00,&H30,&HC0
1770 DATA &H00,&HF3,&HC0
1780 DATA &H00,&H03,&HC0
1790 DATA &H00,&HFF,&HCC
1800 '
1810 ' Castle
1820 ' 13-roomGfxCastle
1830 DATA &HF0,&HFE,&H15
1840 DATA &H30,&H03,&H1F
1850 DATA &H30,&H03,&HFF
1860 DATA &H30,&H00,&HFF
1870 DATA &H30,&H00,&H3F
1880 DATA &H30,&H00,&H00
1890 DATA &HF0,&HFF,&H0F
1900 '
1910 ' Red Maze #1 
1920 ' 14-roomGfxRedMaze1
1930 DATA &HF0,&HFF,&HFF
1940 DATA &H00,&H00,&H00
1950 DATA &HF0,&HFF,&H0F
1960 DATA &H00,&H00,&H0C
1970 DATA &HF0,&HFF,&H0C
1980 DATA &HF0,&H03,&HCC
1990 DATA &HF0,&H33,&HCF
2000 '
2010 ' Bottom of Red Maze 
2020 ' 15-roomGfxRedMazeBottom
2030 DATA &H00,&H33,&HCF
2040 DATA &H00,&H30,&H00
2050 DATA &H00,&H33,&HFF
2060 DATA &H00,&H33,&H00
2070 DATA &H00,&HFF,&H00
2080 DATA &H00,&H00,&H00
2090 DATA &H00,&HFF,&H0F
2100 '
2110 ' Top of Red Maze
2120 ' 16-roomGfxRedMazeTop
2130 DATA &H00,&HFF,&HFF
2140 DATA &H00,&H00,&HC0
2150 DATA &H00,&HFF,&HCF
2160 DATA &H00,&H00,&HCC
2170 DATA &H00,&H33,&HFF
2180 DATA &H00,&H33,&H00
2190 DATA &H00,&H3F,&H0C
2200 '
2210 ' White Castle Entry 
2220 ' 17-roomGfxWhiteCastleEntry
2230 DATA &H00,&H3F,&H0C
2240 DATA &H00,&H00,&H0C
2250 DATA &H00,&HFF,&H0F
2260 DATA &H00,&H30,&H00
2270 DATA &H00,&H30,&H00
2280 DATA &H00,&H30,&H00
2290 DATA &H00,&HFF,&H0F
2300 '
2310 ' Top Entry Room
2320 ' 18-roomGfxTopEntryRoom
2330 DATA &H00,&HFF,&H0F
2340 DATA &H30,&H00,&H00
2350 DATA &H30,&H00,&H00
2360 DATA &H30,&H00,&H00
2370 DATA &H30,&H00,&H00
2380 DATA &H30,&H00,&H00
2390 DATA &H00,&HFF,&HFF
2400 '
2410 ' Black Maze #1 
2420 ' 19-roomGfxBlackMaze1
2430 DATA &H00,&HF0,&HFF
2440 DATA &H00,&H00,&H03
2450 DATA &H00,&HFF,&H03
2460 DATA &H00,&H00,&H00
2470 DATA &H30,&H3F,&HFF
2480 DATA &H00,&H30,&H00
2490 DATA &H00,&HF0,&HFF
2500 '
2510 ' Black Maze #3 
2520 ' 20-roomGfxBlackMaze3
2530 DATA &H00,&HF0,&HFF
2540 DATA &H30,&H00,&H00
2550 DATA &H30,&H3F,&HFF
2560 DATA &H00,&H30,&H00
2570 DATA &H00,&HF0,&HFF
2580 DATA &H30,&H00,&H03
2590 DATA &H00,&HF0,&HFF
2600 ' 
2610 ' Black Maze #2 
2620 ' 21-roomGfxBlackMaze2
2630 DATA &H00,&HFF,&HFF
2640 DATA &H00,&H00,&HC0
2650 DATA &H00,&HFF,&HCF
2660 DATA &H00,&H00,&H0C
2670 DATA &H00,&H0F,&HFF
2680 DATA &H00,&H0F,&HC0
2690 DATA &H30,&HCF,&HCC
2700 '
2710 ' Black Maze Entry 
2720 ' 22-roomGfxBlackMazeEntry
2730 DATA &H30,&HCF,&HCC
2740 DATA &H00,&HC0,&HCC
2750 DATA &H00,&HFF,&H0F
2760 DATA &H00,&H00,&H00
2770 DATA &H00,&HFF,&H0F
2780 DATA &H00,&H00,&H00
2790 DATA &H00,&HFF,&H0F
2800 '
2810 ' Indexed array of all rooms and their properties
2820 '
2830 'zROOMFLAG_NONE = 0x00
2840 'zROOMFLAG_MIRROR= 0x01 // bit 0 - 1 if graphics are mirrored, 0 for reversed
2850 'zROOMFLAG_LEFTTHINWALL = 0x02 // bit 1 - 1 for left thin wall
2860 'zROOMFLAG_RIGHTTHINWALL= 0x04 // bit 2 - 1 for right thin wall
2870 '
2880 '  GFX,RMFLG,CLR, UP,RIGHT, DOWN, LEFT
2890 ' 0 - Number Room
2900 DATA  3, &H00,  6, &H00, &H00, &H00, &H00
2910 ' 1 - Top Access
2920 DATA  1, &H02, 12, &H08, &H02, &H80, &H03
2930 ' 2 - Top Access
2940 DATA  1, &H00, 11, &H11, &H03, &H83, &H01
2950 ' 3 - Left of Name
2960 DATA  0, &H03, 13, &H06, &H01, &H86, &H02
2970 ' 4 - Top of Blue Maze
2980 DATA  5, &H00,  7, &H10, &H05, &H07, &H06
2990 ' 5 - Blue Maze #1
3000 DATA  6, &H00,  7, &H1D, &H06, &H08, &H04
3010 ' 6 - Bottom of Blue Maze
3020 DATA  7, &H00,  7, &H07, &H04, &H03, &H05
3030 ' 7 - Center of Blue Maze
3040 DATA  8, &H00,  7, &H04, &H08, &H06, &H08
3050 ' 8 - Blue Maze Entry
3060 DATA  9, &H00,  7, &H05, &H07, &H01, &H07
3070 ' 9 - Maze Middle
3080 DATA 10, &H00,  1, &H0A, &H0A, &H0B, &H0A
3090 ' A - Maze Entry
3100 DATA 12, &H00,  1, &H03, &H09, &H09, &H09
3110 ' B - Maze Side
3120 DATA 11, &H00,  1, &H09, &H0C, &H1C, &H0D
3130 ' C - Side Corridor
3140 DATA  2, &H03,  8, &H1C, &H0D, &H1D, &H0B
3150 ' D - Side Corridor
3160 DATA  2, &H02, 10, &H0F, &H0B, &H0E, &H0C
3170 ' E - Top Entry Room
3180 DATA 18, &H00,  9, &H0D, &H10, &H0F, &H10
3190 ' F - White Castle
3200 DATA 13, &H00,  2, &H0E, &H0F, &H0D, &H0F
3210 '10 - Black Castle
3220 DATA 13, &H00,  0, &H01, &H1C, &H04, &H1C
3230 '11 - Yellow Castle
3240 DATA 13, &H00,  3, &H06, &H03, &H02, &H01
3250 '12 - Yellow Castle Entry
3260 DATA  3, &H00,  3, &H12, &H12, &H12, &H12
3270 '13 - Black Maze #1
3280 DATA 19, &H00,  1, &H15, &H14, &H15, &H16
3290 '14 - Black Maze #2
3300 DATA 21, &H01,  1, &H16, &H15, &H16, &H13
3310 '15 - Black Maze #3
3320 DATA 20, &H01,  1, &H13, &H16, &H13, &H14
3330 '16 - Black Maze Entry
3340 DATA 22, &H00,  1, &H14, &H13, &H1B, &H15
3350 '17 - Red Maze #1
3360 DATA 14, &H00,  5, &H19, &H18, &H19, &H18
3370 '18 - Top of Red Maze
3380 DATA 16, &H00,  5, &H1A, &H17, &H1A, &H17
3390 '19 - Bottom of Red Maze
3400 DATA 15, &H00,  5, &H17, &H1A, &H17, &H1A
3410 '1A - White Castle Entry
3420 DATA 17, &H00,  5, &H18, &H19, &H18, &H19
3430 '1B - Black Castle Entry
3440 DATA  4, &H00,  5, &H89, &H89, &H89, &H89
3450 '1C - Other Purple Room
3460 DATA  3, &H00,  6, &H1D, &H07, &H8C, &H08
3470 '1D - Top Entry Room
3480 DATA 18, &H00,  5, &H8F, &H01, &H10, &H03
3490 '1E - Name Room
3500 DATA  1, &H00,  6, &H06, &H01, &H06, &H03
